
[*第三章:NumPy库*](./README.md)


# 3.8. 数组操作

通常需要使用已经创建的数组创建数组。在本节中，您将看到如何通过连接或分割已经定义的数组来创建新的数组。

## 连接数组

您可以合并多个数组以形成一个包含所有数组的新数组。NumPy使用了叠加的概念，在这方面提供了一些函数。例如，您可以使用vstack()函数执行垂直叠加，该函数将第二个数组合并为第一个数组的新行。在本例中，数组沿垂直方向增长。相反，hstack()函数执行水平叠加;也就是说，第二个数组被添加到第一个数组的列中。

```python
>>> A = np.ones((3, 3))
>>> B = np.zeros((3, 3))
>>> np.vstack((A, B))
array([[ 1.,  1.,  1.],
       [ 1.,  1.,  1.],
       [ 1.,  1.,  1.],
       [ 0.,  0.,  0.],
       [ 0.,  0.,  0.],
       [ 0.,  0.,  0.]])
       
>>> np.hstack((A,B))
array([[ 1.,  1.,  1.,  0.,  0.,  0.],
       [ 1.,  1.,  1.,  0.,  0.,  0.],
       [ 1.,  1.,  1.,  0.,  0.,  0.]])
```

在多个数组之间执行堆栈操作的另外两个函数是column_stack()和row_stack()。这些函数与前两个函数的操作方式不同。通常这些函数与一维数组一起使用，一维数组以列或行的形式堆叠，以形成一个新的二维数组。

```python
>>> a = np.array([0, 1, 2])
>>> b = np.array([3, 4, 5])
>>> c = np.array([6, 7, 8])
>>> np.column_stack((a, b, c)) 
array([[0, 3, 6],
        [1, 4, 7],
        [2, 5, 8]])
    
>>> np.row_stack((a, b, c))
 array([[0, 1, 2],
        [3, 4, 5],
        [6, 7, 8]])
```


## 拆分数组

在上一节中，您了解了如何通过堆叠组装多个数组。现在，您将看到如何将数组划分为几个部分。在NumPy中，您可以使用拆分来完成此操作。在这里，您也有一组函数，这些函数既可以水平地处理hsplit()函数，也可以垂直地处理vsplit()函数。

```python
>>> A = np.arange(16).reshape((4, 4))
>>> A
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15]])
```

因此，如果要将数组水平拆分，即将数组的宽度划分为两个部分，则4x4矩阵A将被拆分为两个2x4矩阵。

```python
>>> [B,C] = np.hsplit(A, 2)
>>> B
array([[ 0,  1],
       [ 4,  5],
       [ 8,  9],
       [12, 13]])
>>> C
array([[ 2,  3],
       [ 6,  7],
       [10, 11],
       [14, 15]])
```

相反，如果要垂直拆分数组，即将数组的高度划分为两个部分，则4x4矩阵A将被拆分为两个4x2矩阵。

```python
>>> [B,C] = np.vsplit(A, 2)
>>> B
array([[0, 1, 2, 3],
       [4, 5, 6, 7]])
>>> C
array([[ 8,  9, 10, 11],
       [12, 13, 14, 15]])
```

更复杂的命令是split()函数，它允许将数组分割为非对称的部分。将数组作为参数传递，还必须指定要划分的部分的索引。如果使用选项axis = 1，那么索引将是列;如果选项是axis = 0，那么它们就是行索引。例如，如果你想把矩阵分成三部分，第一部分包括第一列，第二部分包括第二列和第三列，第三部分包括最后一列，你必须用下面的方式指定三个索引。

```python
>>> [A1,A2,A3] = np.split(A,[1,3],axis=1)
>>> A1
array([[ 0],
       [ 4],
       [ 8],
       [12]])
       
>>> A2
array([[ 1,  2],
       [ 5,  6],
       [ 9, 10],
       [13, 14]])
       
>>> A3
array([[ 3],
       [ 7],
       [11],
       [15]])
```

你可以用行来做同样的事情。

```python
>>> [A1,A2,A3] = np.split(A,[1,3],axis=0)
>>> A1
array([[0, 1, 2, 3]])
>>> A2
array([[ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
>>> A3
array([[12, 13, 14, 15]])
```

此特性还包括vsplit()和hsplp()函数的功能。

